(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"011c":function(e,t,n){"use strict";n("738f")},"034f":function(e,t,n){"use strict";n("85ec")},"176e":function(e,t,n){},"1f2b":function(e,t,n){"use strict";n("c4db")},2825:function(e,t,n){},"342e":function(e,t,n){},"3a01":function(e,t,n){"use strict";n("9e32")},"4dc9":function(e,t,n){},5264:function(e,t,n){"use strict";n("176e")},"56d7":function(e,t,n){"use strict";n.r(t);n("06ea");var r=n("fe2b"),o=(n("0ece"),n("27fd")),a=(n("9b09"),n("6634")),i=(n("c0ed"),n("9fd0")),s=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},c=[],u={name:"APP"},d=u,f=(n("034f"),n("2877")),m=Object(f["a"])(d,l,c,!1,null,null,null),p=m.exports,h=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("vue-particles",{attrs:{color:"#dedede"}}),n("div",{staticClass:"formContainer"},[n("h3",{staticClass:"lpogintitle"},[e._v("用户登录")]),n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),n("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("注册")])],1)],1)],1)],1)},g=[],v=(n("99af"),n("b0c0"),n("e9c4"),{name:"Login",components:{},data:function(){return{ruleForm:{name:"",password:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]}}},computed:{},watch:{},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("请输入所有字段"),!1;t.$axios.get("/users?username=".concat(t.ruleForm.name,"&password=").concat(t.ruleForm.password,"&roleState=true&_expand=role")).then((function(e){console.log(e.data),0===e.data.length?t.$message.error("用户名或密码不匹配"):(localStorage.setItem("token",JSON.stringify(e.data[0])),t.$router.push("/"))}))}))},resetForm:function(e){this.$refs[e].resetFields()}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),w=v,_=(n("848e"),Object(f["a"])(w,b,g,!1,null,"e08b5e64",null)),y=_.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"news"},[e._m(0),n("el-row",{attrs:{gutter:32}},e._l(e.list,(function(t){return n("el-col",{key:t.id,staticClass:"box",attrs:{span:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t[0]))])]),n("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:e.pagination,"data-source":t[1]},scopedSlots:e._u([{key:"renderItem",fn:function(t){return n("a-list-item",{key:"item.title"},[n("a-list-item-meta",{attrs:{description:t.description}},[n("router-link",{attrs:{slot:"title",to:"/detail/"+t.id},slot:"title"},[e._v(" "+e._s(t.title))])],1)],1)}}],null,!0)})],1)],1)})),1)],1)},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("h3",[e._v("全球大新闻")]),n("span",[e._v("查看新闻")])])}],F=(n("4fad"),{name:"News",components:{},data:function(){return{list:[],pagination:{pageSize:3}}},computed:{},watch:{},methods:{handleCurrentChange:function(e){this.currentPage=e}},created:function(){var e=this;this.$axios.get("/news?publishState=2&_expand=category").then((function(t){var n=Object.entries(e._.groupBy(t.data,(function(e){return e.category.title})));e.list=n}))},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),$=F,O=(n("5264"),Object(f["a"])($,x,C,!1,null,"e955661e",null)),k=O.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"detail"},[e.newsInfo.title&&e.newsInfo.category.title?n("a-page-header",{attrs:{title:e.newsInfo.title,"sub-title":e.newsInfo.category.title},on:{back:e.back}}):e._e(),n("a-descriptions",{staticStyle:{padding:"0 24px"},attrs:{size:"small"}},[n("a-descriptions-item",{attrs:{label:"发布者"}},[e._v(e._s(e.newsInfo.author)+" ")]),n("a-descriptions-item",{attrs:{label:"发布时间"}},[e._v(" "+e._s(e.time)+" ")]),n("a-descriptions-item",{attrs:{label:"区域"}},[e._v(" "+e._s(e.newsInfo.region)+" ")]),n("a-descriptions-item",{attrs:{label:"访问数量"}},[e._v(" "+e._s(e.newsInfo.view)+" ")]),n("a-descriptions-item",{attrs:{label:"点赞数量"}},[e._v(" "+e._s(e.newsInfo.star)+" "),n("i",{staticClass:"el-icon-thumb",staticStyle:{color:"red","margin-left":"20px"},on:{click:e.handleStar}})]),n("a-descriptions-item",{attrs:{label:"评论数量"}},[e._v(" 0 ")])],1),n("div",{staticStyle:{margin:"0 24px",border:"1px solid gray"},domProps:{innerHTML:e._s(e.newsInfo.content)}})],1)},I=[],j=n("5530"),L={name:"Detail",components:{},data:function(){return{newsInfo:[]}},computed:{time:function(){return this.$day(this.newsInfo.publishTime).format("YYYY/MM/DD HH:mm:ss")}},watch:{},methods:{back:function(){this.$router.go(-1)},handleStar:function(){this.newsInfo.star++,console.log(this.newsInfo.star),this.$axios.patch("/news/".concat(this.$route.params.id),{star:this.newsInfo.star})}},created:function(){var e=this;this.$axios.get("/news/".concat(this.$route.params.id,"?_expand=category&_expand=role")).then((function(t){return e.newsInfo=Object(j["a"])(Object(j["a"])({},t.data),{},{view:t.data.view+1}),t.data})).then((function(t){e.$axios.patch("/news/".concat(e.$route.params.id),{view:t.view+1})}))},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},P=L,N=(n("f00a"),Object(f["a"])(P,S,I,!1,null,"80a798c0",null)),E=N.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100vh"}},[n("el-aside",{attrs:{width:"auto"}},[n("Menu")],1),n("el-container",[n("el-header",[n("TopHeader")],1),n("el-main",[n("NewsRouter")],1)],1)],1)},D=[],U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.activePath,collapse:e.isCollapse,"unique-opened":!0,"background-color":"#001529","text-color":"#FFFFFF","active-text-color":"#6284FF",router:!0},on:{open:e.handleOpen,close:e.handleClose}},[n("h3",{staticClass:"title"},[e._v(e._s(e.isCollapse?"管理":"全球新闻发布管理系统"))]),e._l(e.noChildren,(function(t){return n("el-menu-item",{key:t.id,attrs:{index:t.key},on:{click:function(n){return e.saveNavState(t.key)}}},[n("i",{staticClass:"el-icon-menu"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])})),e._l(e.haveChildren,(function(t){return n("el-submenu",{key:t.id,attrs:{index:t.key}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-warning"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._l(t.children,(function(t){return[1===t.pagepermisson?n("el-menu-item",{key:t.id,attrs:{index:t.key},on:{click:function(n){return e.saveNavState(t.key)}}},[n("i",{staticClass:"el-icon-warning"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]):e._e()]}))],2)}))],2)},A=[],z=(n("4de4"),n("d3b7"),n("2f62")),T={name:"Menu",data:function(){return{rights:[],activePath:"/home"}},watch:{},computed:Object(j["a"])({noChildren:function(){return this.rights.filter((function(e){return 0==e.children.length}))},haveChildren:function(){return this.rights.filter((function(e){return 0==!e.children.length}))}},Object(z["c"])(["isCollapse"])),methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},saveNavState:function(e){window.sessionStorage.setItem("activePath",e)}},created:function(){var e=this;this.$axios.get("/rights?_embed=children").then((function(t){e.rights=t.data})),this.activePath=window.sessionStorage.getItem("activePath")},mounted:function(){}},q=T,H=(n("a27f"),Object(f["a"])(q,U,A,!1,null,"af848f30",null)),B=H.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"topHeader"},[n("i",{directives:[{name:"show",rawName:"v-show",value:1==e.isCollapse,expression:"isCollapse == true"}],staticClass:"el-icon-s-unfold fold",on:{click:e.OPEN}}),n("i",{directives:[{name:"show",rawName:"v-show",value:0==e.isCollapse,expression:"isCollapse == false"}],staticClass:"el-icon-s-fold fold",on:{click:e.OPEN}}),n("div",{staticClass:"right"},[n("span",[e._v("欢迎 "),n("span",{staticStyle:{color:"#1890ff"}},[e._v(e._s(e.username))]),e._v(" 回来")]),n("div",{staticClass:"headPortrait"},[n("el-dropdown",{attrs:{"hide-on-click":!1,placement:"bottom"},on:{command:e.withdraw}},[n("el-avatar",{attrs:{size:e.size,src:e.circleUrl}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[e._v(e._s(e.roleName))]),n("el-dropdown-item",{attrs:{command:""}},[e._v("退出")])],1)],1)],1)])])},R=[],Y={name:"TopHeader",components:{},data:function(){return{circleUrl:"https://s1.ax1x.com/2022/06/13/XfE6xI.jpg",size:30}},computed:Object(j["a"])(Object(j["a"])({},Object(z["c"])(["isCollapse"])),{},{username:function(){return JSON.parse(localStorage.getItem("token")).username},roleName:function(){return JSON.parse(localStorage.getItem("token")).role.roleName}}),watch:{},methods:Object(j["a"])({withdraw:function(){localStorage.removeItem("token"),this.$router.push("/login")}},Object(z["b"])(["OPEN"])),created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},V=Y,X=(n("d1a7"),Object(f["a"])(V,J,R,!1,null,"5b774059",null)),G=X.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},K=[],Q={name:"NewsRouter",components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},Z=Q,ee=(n("f635"),Object(f["a"])(Z,W,K,!1,null,"5a329aa0",null)),te=ee.exports,ne={name:"Main",components:{Menu:B,TopHeader:G,NewsRouter:te},methods:{},mounted:function(){}},re=ne,oe=(n("011c"),Object(f["a"])(re,M,D,!1,null,"7e75e96a",null)),ae=oe.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("用户最常浏览")])]),e._l(e.viewList,(function(t){return n("div",{key:t.id,staticClass:"text"},[n("router-link",{attrs:{to:"/news-manage/preview/"+t.id}},[e._v(e._s(t.title))])],1)}))],2)],1),n("el-col",{attrs:{span:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("用户点赞最多")])]),e._l(e.starList,(function(t){return n("div",{key:t.id,staticClass:"text"},[n("router-link",{attrs:{to:"/news-manage/preview/"+t.id}},[e._v(e._s(t.title))])],1)}))],2)],1),n("el-col",{attrs:{span:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-image",{staticStyle:{width:"100%"},attrs:{src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png",fit:"contain"}})],1),n("div",{staticClass:"box"},[n("el-avatar",{staticClass:"img",attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),n("div",{staticClass:"text"},[n("h4",[e._v("admin")]),n("p",[e._v("全球"),n("span",[e._v("超级管理员")])])])],1),n("el-divider"),n("el-row",{staticClass:"row-bg row-margin-t",attrs:{gutter:20,type:"flex"}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"t-icon"},[n("i",{staticClass:"el-icon-s-tools icon-style",on:{click:e.rightbox}})])]),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"t-icon"},[n("i",{staticClass:"el-icon-edit icon-style"})])]),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"t-icon"},[n("i",{staticClass:"el-icon-share icon-style"})])])],1)],1)],1)],1),n("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"main"}}),n("el-drawer",{attrs:{title:"个人新闻分类",visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[n("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"main-pre"}})])],1)},se=[],le=(n("b64b"),n("d81d"),n("07ac"),{components:{},data:function(){return{viewList:[],starList:[],drawer:!1,direction:"rtl",allList:[],pieChart:null}},computed:{},watch:{},methods:{rightbox:function(){var e=this;setTimeout((function(){e.renderPieView()}),0),this.drawer=!0},renderPieView:function(){var e,t,n=JSON.parse(localStorage.getItem("token")),r=n.username,o=this.allList.filter((function(e){return e.author===r})),a=this._.groupBy(o,(function(e){return e.category.title})),i=[];for(var s in a)i.push({name:s,value:a[s].length});this.pieChart?e=this.pieChart:(e=this.$echarts.init(document.getElementById("main-pre")),this.pieChart=e),t={title:{text:"当前用户新闻分类图示",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"发布数量",type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},t&&e.setOption(t)},drawLine:function(e){var t=this.$echarts.init(document.getElementById("main"));t.setOption({title:{text:"新闻分类图示"},tooltip:{},legend:{data:["数量"]},xAxis:{data:Object.keys(e),axisLabel:{rotate:"45",interval:0}},yAxis:{minInterval:1},series:[{name:"数量",type:"bar",data:Object.values(e).map((function(e){return e.length}))}]})},handleClose:function(){this.drawer=!1}},created:function(){var e=this;this.$axios.get("/news?publishState=2&_expand=category&_sort=view&_order=desc&_limit=6").then((function(t){e.viewList=t.data})),this.$axios.get("/news?publishState=2&_expand=category&_sort=star&_order=desc&_limit=6").then((function(t){e.starList=t.data})),this.$axios.get("/news?publishState=2&_expand=category").then((function(t){e.drawLine(e._.groupBy(t.data,(function(e){return e.category.title}))),e.allList=t.data}))},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}}),ce=le,ue=(n("1f2b"),Object(f["a"])(ce,ie,se,!1,null,"d9d9351e",null)),de=ue.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-button",{attrs:{type:"primary"},on:{click:function(){e.isAddvisible=!0}}},[e._v("添加用户")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)}},[n("el-table-column",{attrs:{prop:"region",label:"区域",width:"180"}}),n("el-table-column",{attrs:{prop:"role.roleName",label:"角色名称",width:"180"}}),n("el-table-column",{attrs:{prop:"username",label:"用户名"}}),n("el-table-column",{attrs:{label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{disabled:t.row.default,value:t.row.roleState},on:{change:function(n){return e.roleState(t.row)}}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:t.row.default,circle:""},on:{click:function(n){return e.handleDelete(t.row)}}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",disabled:t.row.default,circle:""},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}})]}}])})],1),n("el-pagination",{attrs:{align:"center",background:"","current-page":e.currentPage,"page-sizes":[5],"page-size":e.pageSize,layout:" prev, pager, next",total:e.tableData.length},on:{"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{title:e.title,visible:e.isAddvisible,width:"30%"},on:{"update:visible":function(t){e.isAddvisible=t}}},[n("span",[n("UserForm",{ref:"addFrom",attrs:{roleList:e.roleList,regionList:e.regionList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.isAddvisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addFormOk}},[e._v("确 定")])],1)])],1)},me=[],pe=n("2909"),he=(n("130f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"UserForm"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,size:"small","label-width":"100px","label-position":"top"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),n("el-form-item",{attrs:{label:"区域",prop:"region"}},[n("el-select",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.region,callback:function(t){e.$set(e.ruleForm,"region",t)},expression:"ruleForm.region"}},e._l(e.regionList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[n("el-select",{on:{change:e.aaa},model:{value:e.ruleForm.roleId,callback:function(t){e.$set(e.ruleForm,"roleId",t)},expression:"ruleForm.roleId"}},e._l(e.roleList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.roleName,value:e.roleName}})})),1)],1)],1)],1)}),be=[],ge={components:{},props:["roleList","regionList"],data:function(){return{roleObj:{1:"superadmin",2:"admin",3:"editor"},disabled:!1,ruleForm:{username:"",password:"",region:[],roleId:[]},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}],region:[{required:!1,message:"请选择区域",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},computed:{},watch:{},methods:{submitForm:function(){this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")}))},resetForm:function(e){this.$refs[e].resetFields()},aaa:function(){"超级管理员"===this.ruleForm.roleId?(this.disabled=!0,this.ruleForm.region=""):this.disabled=!1}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},ve=ge,we=(n("3a01"),Object(f["a"])(ve,he,be,!1,null,"07466554",null)),_e=we.exports,ye={name:"UserList",components:{UserForm:_e},data:function(){return{radioModel:!0,region:{},username:[],regionList:[],roleList:{},isAddvisible:!1,ruleForm:[],currentPage:1,pageSize:5,title:"添加用户"}},computed:{tableData:function(){for(var e=this.username,t=0;t<e.length;t++)""===e[t].region&&(e[t].region="全球");return e}},watch:{},methods:{addFormOk:function(){var e=this;this.$refs.addFrom.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.isAddvisible=!1,e.ruleForm=Object(j["a"])({},e.$refs.addFrom.ruleForm),console.log(e.ruleForm),"超级管理员"===e.ruleForm.roleId?e.ruleForm.roleId=1:"区域管理员"===e.ruleForm.roleId?e.ruleForm.roleId=2:e.ruleForm.roleId=3,e.$axios.post("/users",Object(j["a"])(Object(j["a"])({},e.ruleForm),{},{roleState:!0,default:!1})).then((function(t){console.log(t.data),e.username=[].concat(Object(pe["a"])(e.username),[Object(j["a"])(Object(j["a"])({},t.data),{},{role:e.roleList.filter((function(t){return t.id===e.ruleForm.roleId}))[0]})]),console.log(e.username)})),e.clean()}))},clean:function(){var e=this;setImmediate((function(){e.$refs.addFrom.$refs.ruleForm.resetFields(),e.$refs.addFrom.$refs.disabled=!1}),0)},roleState:function(e){e.roleState=!e.roleState,this.$axios.patch("/users/".concat(e.id),{roleState:e.roleState})},handleEdit:function(e,t){var n=this;this.isAddvisible=!0,1===this.ruleForm.roleId?this.ruleForm.roleId="超级管理员":2===this.ruleForm.roleId?this.ruleForm.roleId="区域管理员":this.ruleForm.roleId="区域编辑",setInterval((function(){n.$refs.addFrom.ruleForm=Object(j["a"])({},t)}),0),console.log(e,t)},handleDelete:function(e){var t=this;this.$confirm("将删除该用户, 是否确定?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.username=t.username.filter((function(t){return t.id!==e.id})),t.$axios.delete("/users/".concat(e.id))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e}},created:function(){var e=this,t={1:"superadmin",2:"admin",3:"editor"},n=JSON.parse(localStorage.getItem("token")),r=n.roleId,o=n.region,a=n.username;this.$axios.get("/regions").then((function(t){e.regionList=t.data})),this.$axios.get("/roles").then((function(t){e.roleList=t.data})),this.$axios.get("/users?_expand=role").then((function(n){var i=n.data;e.username="superadmin"===t[r]?i:[].concat(Object(pe["a"])(i.filter((function(e){return e.username===a}))),Object(pe["a"])(i.filter((function(t){return t.region===o&&"editor"===e.roleObj[t.roleId]})))),console.log(e.username)}))},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},xe=ye,Ce=(n("7d2d"),Object(f["a"])(xe,fe,me,!1,null,"23f2b3e9",null)),Fe=Ce.exports;s["default"].use(h["a"]);var $e=[{path:"/login",name:"Login",component:y},{path:"/news",name:"News",component:k},{path:"/detail/:id",name:"Detail",component:E},{path:"*",name:"Main",component:ae,meta:{isAuth:!0},children:[{path:"/home",name:"Home",component:de,meta:{isAuth:!0}},{path:"/user-manage/list",name:"UserList",component:Fe,meta:{isAuth:!0}}]}],Oe=new h["a"]({mode:"history",base:"/vue/",routes:$e});Oe.beforeEach((function(e,t,n){"/"==e.path&&(window.sessionStorage.setItem("activePath","/home"),n({path:"/home"})),e.meta.isAuth?localStorage.getItem("token")?n():n({path:"/login"}):n()}));var ke=Oe;s["default"].use(z["a"]);var Se=new z["a"].Store({state:{isCollapse:!1},mutations:{OPEN:function(e){e.isCollapse=!e.isCollapse}},actions:{},modules:{}}),Ie=n("5c96"),je=n.n(Ie),Le=(n("0fae"),n("bc3a")),Pe=n.n(Le),Ne=(n("840a"),n("98c9")),Ee=n("313e"),Me=n("2ef0"),De=n.n(Me);Pe.a.defaults.baseURL="http://101.43.137.36:2246";var Ue=n("5a0c"),Ae=n.n(Ue);s["default"].prototype.$axios=Pe.a,s["default"].use(r["b"]).use(o["a"]).use(a["a"]).use(i["a"]),s["default"].prototype.$day=Ae.a,s["default"].prototype._=De.a,s["default"].prototype.$echarts=Ee,s["default"].use(Ne["a"]),s["default"].config.productionTip=!1,s["default"].use(je.a),new s["default"]({router:ke,store:Se,render:function(e){return e(p)}}).$mount("#app")},"611b":function(e,t,n){},"738f":function(e,t,n){},"7d2d":function(e,t,n){"use strict";n("611b")},"848e":function(e,t,n){"use strict";n("2825")},"85ec":function(e,t,n){},"9e32":function(e,t,n){},a27f:function(e,t,n){"use strict";n("e6a7")},c4db:function(e,t,n){},d1a7:function(e,t,n){"use strict";n("fb6a")},e6a7:function(e,t,n){},f00a:function(e,t,n){"use strict";n("4dc9")},f635:function(e,t,n){"use strict";n("342e")},fb6a:function(e,t,n){}});
//# sourceMappingURL=app.ab821960.js.map